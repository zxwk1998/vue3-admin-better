"use strict";(self.webpackChunkvue3_admin_better=self.webpackChunkvue3_admin_better||[]).push([["9620"],{37176:function(e,t,i){var a=i(44930),n=i.n(a),l=i(61387),o=i.n(l)()(n());o.push([e.id,".notification-container[data-v-371021fa]{padding:20px}.notification-container .card-header[data-v-371021fa]{font-weight:bold}.notification-container .notification-content[data-v-371021fa]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis}.notification-container .pagination-container[data-v-371021fa]{margin-top:20px;text-align:right}",""]),t.A=o},70687:function(e,t,i){i.r(t),i.d(t,{default:function(){return z}});var a=i(33249);let n={class:"notification-container"},l={class:"card-header"},o={key:1},d={class:"notification-content"},r={class:"notification-content"},s={class:"notification-content"},c={class:"pagination-container"},u={class:"dialog-footer"};var f=i(7368),g=i.n(f),p=i(60473),b=i.n(p),h=i(62915),m=i.n(h),k=i(14808),F=i.n(k),_=i(85364),v=i.n(_),C=i(78577),y=i.n(C),w=i(37176),V={};V.styleTagTransform=y(),V.setAttributes=F(),V.insert=m().bind(null,"head"),V.domAPI=b(),V.insertStyleElement=v(),g()(w.A,V),w.A&&w.A.locals&&w.A.locals;var z=(0,i(77262).default)({name:"Notification",data:()=>({activeTab:"all",currentPage:1,pageSize:10,totalNotifications:0,loading:!1,sending:!1,dialogVisible:!1,notifications:[{id:1,title:"系统维护通知",content:"系统将于今晚00:00-02:00进行例行维护，请提前做好相关准备。",sender:"系统管理员",date:"2023-05-15 14:30",read:!1,priority:3},{id:2,title:"新功能上线",content:"我们新增了数据可视化功能，欢迎体验使用。",sender:"产品团队",date:"2023-05-14 09:15",read:!0,priority:1},{id:3,title:"安全更新提醒",content:"检测到您的密码强度较弱，请及时修改以确保账户安全。",sender:"安全团队",date:"2023-05-12 16:45",read:!1,priority:2},{id:4,title:"会议通知",content:"本周五下午3点将召开全体成员会议，请准时参加。",sender:"人事部",date:"2023-05-10 11:20",read:!0,priority:2},{id:5,title:"系统升级完成",content:"系统v2.0版本已升级完成，新增多项功能和优化。",sender:"技术部",date:"2023-05-08 18:00",read:!0,priority:1}],notificationForm:{title:"",content:"",recipients:[],priority:1},notificationRules:{title:[{required:!0,message:"请输入通知标题",trigger:"blur"}],content:[{required:!0,message:"请输入通知内容",trigger:"blur"}],recipients:[{required:!0,message:"请选择接收者",trigger:"change"}]},users:[{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"王五"},{id:4,name:"赵六"},{id:5,name:"钱七"}]}),computed:{filteredNotifications(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.notifications.slice(e,t)},unreadNotifications(){return this.notifications.filter(e=>!e.read)},readNotifications(){return this.notifications.filter(e=>e.read)}},methods:{handleTabChange(e){this.activeTab=e,this.currentPage=1},handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},markAsRead(e){let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications[t].read=!0,this.$message.success("已标记为已读"))},deleteNotification(e){this.$confirm(`确定要删除通知"${e.title}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications.splice(t,1),this.totalNotifications=this.notifications.length,this.$message.success("删除成功"))}).catch(()=>{this.$message.info("已取消删除")})},showCreateDialog(){this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.notificationFormRef.resetFields()})},sendNotification(){this.$refs.notificationFormRef.validate(e=>{e&&(this.sending=!0,setTimeout(()=>{let e={id:this.notifications.length+1,...this.notificationForm,sender:"当前用户",date:new Date().toLocaleString(),read:!1};this.notifications.unshift(e),this.totalNotifications=this.notifications.length,this.dialogVisible=!1,this.sending=!1,this.$message.success("通知发送成功")},1e3))})},refreshNotifications(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$message.success("刷新成功")},500)}}},[["render",function(e,t,i,f,g,p){let b=(0,a.g2)("el-button"),h=(0,a.g2)("el-badge"),m=(0,a.g2)("el-table-column"),k=(0,a.g2)("el-table"),F=(0,a.g2)("el-tab-pane"),_=(0,a.g2)("el-tabs"),v=(0,a.g2)("el-pagination"),C=(0,a.g2)("el-card"),y=(0,a.g2)("el-input"),w=(0,a.g2)("el-form-item"),V=(0,a.g2)("el-option"),z=(0,a.g2)("el-select"),N=(0,a.g2)("el-radio"),W=(0,a.g2)("el-radio-group"),x=(0,a.g2)("el-form"),T=(0,a.g2)("el-dialog"),S=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(C,{shadow:"never"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",l,[t[11]||(t[11]=(0,a.Lk)("span",null,"通知中心",-1)),(0,a.bF)(b,{type:"primary",onClick:p.showCreateDialog,style:{float:"right","margin-left":"10px"}},{default:(0,a.k6)(()=>[...t[9]||(t[9]=[(0,a.eW)(" 发送通知 ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(b,{onClick:p.refreshNotifications,style:{float:"right"}},{default:(0,a.k6)(()=>[...t[10]||(t[10]=[(0,a.eW)(" 刷新 ",-1)])]),_:1},8,["onClick"])])]),default:(0,a.k6)(()=>[(0,a.bF)(_,{modelValue:g.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>g.activeTab=e),onTabChange:p.handleTabChange},{default:(0,a.k6)(()=>[(0,a.bF)(F,{label:"全部通知",name:"all"},{default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{data:p.filteredNotifications,style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{prop:"title",label:"标题",width:"200"},{default:(0,a.k6)(({row:e})=>[e.read?((0,a.uX)(),(0,a.CE)("span",o,(0,a.v_)(e.title),1)):((0,a.uX)(),(0,a.Wv)(h,{key:0,"is-dot":"",class:"item"},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(e.title),1)]),_:2},1024))]),_:1}),(0,a.bF)(m,{prop:"content",label:"内容"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("div",d,(0,a.v_)(e.content),1)]),_:1}),(0,a.bF)(m,{prop:"sender",label:"发送者",width:"120"}),(0,a.bF)(m,{prop:"date",label:"时间",width:"180"}),(0,a.bF)(m,{label:"操作",width:"200"},{default:(0,a.k6)(({row:e})=>[e.read?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.Wv)(b,{key:0,type:"primary",size:"small",onClick:t=>p.markAsRead(e)},{default:(0,a.k6)(()=>[...t[12]||(t[12]=[(0,a.eW)(" 标为已读 ",-1)])]),_:1},8,["onClick"])),(0,a.bF)(b,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.k6)(()=>[...t[13]||(t[13]=[(0,a.eW)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,g.loading]])]),_:1}),(0,a.bF)(F,{label:"未读通知",name:"unread"},{default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{data:p.unreadNotifications,style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{prop:"title",label:"标题",width:"200"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(h,{"is-dot":"",class:"item"},{default:(0,a.k6)(()=>[(0,a.eW)((0,a.v_)(e.title),1)]),_:2},1024)]),_:1}),(0,a.bF)(m,{prop:"content",label:"内容"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("div",r,(0,a.v_)(e.content),1)]),_:1}),(0,a.bF)(m,{prop:"sender",label:"发送者",width:"120"}),(0,a.bF)(m,{prop:"date",label:"时间",width:"180"}),(0,a.bF)(m,{label:"操作",width:"200"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(b,{type:"primary",size:"small",onClick:t=>p.markAsRead(e)},{default:(0,a.k6)(()=>[...t[14]||(t[14]=[(0,a.eW)(" 标为已读 ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(b,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.k6)(()=>[...t[15]||(t[15]=[(0,a.eW)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,g.loading]])]),_:1}),(0,a.bF)(F,{label:"已读通知",name:"read"},{default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{data:p.readNotifications,style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{prop:"title",label:"标题",width:"200"}),(0,a.bF)(m,{prop:"content",label:"内容"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("div",s,(0,a.v_)(e.content),1)]),_:1}),(0,a.bF)(m,{prop:"sender",label:"发送者",width:"120"}),(0,a.bF)(m,{prop:"date",label:"时间",width:"180"}),(0,a.bF)(m,{label:"操作",width:"120"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(b,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.k6)(()=>[...t[16]||(t[16]=[(0,a.eW)(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,g.loading]])]),_:1})]),_:1},8,["modelValue","onTabChange"]),(0,a.Lk)("div",c,[(0,a.bF)(v,{"current-page":g.currentPage,"onUpdate:currentPage":t[1]||(t[1]=e=>g.currentPage=e),"page-size":g.pageSize,"onUpdate:pageSize":t[2]||(t[2]=e=>g.pageSize=e),"page-sizes":[10,20,50,100],total:g.totalNotifications,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,a.Q3)(" 发送通知对话框 "),(0,a.bF)(T,{modelValue:g.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>g.dialogVisible=e),title:"发送通知",width:"600px"},{footer:(0,a.k6)(()=>[(0,a.Lk)("span",u,[(0,a.bF)(b,{onClick:t[7]||(t[7]=e=>g.dialogVisible=!1)},{default:(0,a.k6)(()=>[...t[20]||(t[20]=[(0,a.eW)("取消",-1)])]),_:1}),(0,a.bF)(b,{type:"primary",onClick:p.sendNotification,loading:g.sending},{default:(0,a.k6)(()=>[...t[21]||(t[21]=[(0,a.eW)(" 发送 ",-1)])]),_:1},8,["onClick","loading"])])]),default:(0,a.k6)(()=>[(0,a.bF)(x,{ref:"notificationFormRef",model:g.notificationForm,rules:g.notificationRules,"label-width":"80px"},{default:(0,a.k6)(()=>[(0,a.bF)(w,{label:"标题",prop:"title"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{modelValue:g.notificationForm.title,"onUpdate:modelValue":t[3]||(t[3]=e=>g.notificationForm.title=e)},null,8,["modelValue"])]),_:1}),(0,a.bF)(w,{label:"内容",prop:"content"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{modelValue:g.notificationForm.content,"onUpdate:modelValue":t[4]||(t[4]=e=>g.notificationForm.content=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),(0,a.bF)(w,{label:"接收者",prop:"recipients"},{default:(0,a.k6)(()=>[(0,a.bF)(z,{modelValue:g.notificationForm.recipients,"onUpdate:modelValue":t[5]||(t[5]=e=>g.notificationForm.recipients=e),multiple:"",placeholder:"请选择接收者",style:{width:"100%"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.users,e=>((0,a.uX)(),(0,a.Wv)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(w,{label:"紧急程度"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:g.notificationForm.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>g.notificationForm.priority=e)},{default:(0,a.k6)(()=>[(0,a.bF)(N,{label:1},{default:(0,a.k6)(()=>[...t[17]||(t[17]=[(0,a.eW)("普通",-1)])]),_:1}),(0,a.bF)(N,{label:2},{default:(0,a.k6)(()=>[...t[18]||(t[18]=[(0,a.eW)("重要",-1)])]),_:1}),(0,a.bF)(N,{label:3},{default:(0,a.k6)(()=>[...t[19]||(t[19]=[(0,a.eW)("紧急",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-371021fa"]])}}]);