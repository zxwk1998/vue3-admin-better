"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["8263"],{36685:function(e,t,a){var i=a(74748),l=a.n(i),r=a(49490),d=a.n(r)()(l());d.push([e.id,".order-container[data-v-432bc3bb]{padding:20px}.order-container .card-header[data-v-432bc3bb]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.order-container .order-product[data-v-432bc3bb]{display:flex;align-items:center;margin-bottom:10px}.order-container .order-product[data-v-432bc3bb]:last-child{margin-bottom:0}.order-container .order-product .product-info .product-meta[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .order-amount[data-v-432bc3bb]{text-align:center;padding:20px;background-color:#f5f7fa;border-radius:4px}.order-container .order-amount .amount-label[data-v-432bc3bb]{font-size:14px;color:#666;margin-bottom:10px}.order-container .order-amount .amount-value[data-v-432bc3bb]{font-size:24px;font-weight:bold;color:#fa541c}.order-container .product-cell[data-v-432bc3bb]{display:flex;align-items:center}.order-container .product-cell .product-spec[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .pagination-container[data-v-432bc3bb]{margin-top:20px;text-align:right}",""]),t.Z=d},10820:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var i=a(78650);let l={class:"order-container"},r={class:"card-header"},d={class:"header-actions"},s={class:"product-info"},n={class:"product-meta"},o={class:"pagination-container"},c={class:"order-amount"},p={class:"amount-value"},u={class:"product-cell"},m={class:"product-spec"},h={class:"dialog-footer"};var g={name:"Order",components:{Search:a(57864).Search},data:()=>({searchText:"",filterStatus:"",currentPage:1,pageSize:10,totalOrders:0,loading:!1,detailDialogVisible:!1,orders:[{id:"SO202305001",customer:"张三",phone:"13800138001",address:"北京市朝阳区某某大厦101室",totalAmount:15998,status:"shipped",createTime:"2023-05-01 14:30:00",payTime:"2023-05-01 14:35:00",shipTime:"2023-05-02 09:15:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 深空黑",price:7999,quantity:2,subtotal:15998,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305002",customer:"李四",phone:"13800138002",address:"上海市浦东新区某某路1001号",totalAmount:7999,status:"paid",createTime:"2023-05-03 10:15:00",payTime:"2023-05-03 10:20:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 银色",price:7999,quantity:1,subtotal:7999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305003",customer:"王五",phone:"13800138003",address:"广州市天河区某某广场201室",totalAmount:2999,status:"pending",createTime:"2023-05-05 16:45:00",products:[{id:5,name:"Apple Watch Series 8",spec:"45mm GPS版",price:2999,quantity:1,subtotal:2999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304015",customer:"赵六",phone:"13800138004",address:"深圳市南山区科技园南路1001号",totalAmount:1899,status:"completed",createTime:"2023-04-15 10:15:00",payTime:"2023-04-15 10:20:00",shipTime:"2023-04-16 14:30:00",completeTime:"2023-04-20 16:45:00",products:[{id:3,name:"AirPods Pro",spec:"第二代",price:1899,quantity:1,subtotal:1899,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304010",customer:"孙七",phone:"13800138005",address:"杭州市西湖区某某路501室",totalAmount:4399,status:"cancelled",createTime:"2023-04-10 09:30:00",cancelTime:"2023-04-10 10:15:00",products:[{id:4,name:"iPad Air",spec:"64GB 深空灰",price:4399,quantity:1,subtotal:4399,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]}],detailOrder:{}}),computed:{filteredOrders(){let e=this.orders;this.searchText&&(e=e.filter(e=>e.id.toLowerCase().includes(this.searchText.toLowerCase())||e.customer.toLowerCase().includes(this.searchText.toLowerCase()))),this.filterStatus&&(e=e.filter(e=>e.status===this.filterStatus));let t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return e.slice(t,a)}},methods:{handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},getStatusText:e=>({pending:"待付款",paid:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[e]||e,getStatusType:e=>({pending:"info",paid:"warning",shipped:"",completed:"success",cancelled:"danger"})[e]||"info",getLogisticsStep:e=>({pending:0,paid:1,shipped:2,completed:3,cancelled:0})[e]||0,viewOrder(e){this.detailOrder={...e},this.detailDialogVisible=!0},shipOrder(e){this.$confirm(`确定要为订单${e.id}发货吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="shipped",this.orders[t].shipTime=new Date().toLocaleString(),this.$message.success("订单已发货"),this.detailOrder.id===e.id&&(this.detailOrder.status="shipped",this.detailOrder.shipTime=this.orders[t].shipTime))}).catch(()=>{this.$message.info("已取消操作")})},cancelOrder(e){this.$confirm(`确定要取消订单${e.id}吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="cancelled",this.orders[t].cancelTime=new Date().toLocaleString(),this.$message.success("订单已取消"),this.detailOrder.id===e.id&&(this.detailOrder.status="cancelled",this.detailOrder.cancelTime=this.orders[t].cancelTime))}).catch(()=>{this.$message.info("已取消操作")})},exportOrders(){this.$message.success("订单导出成功")}}},w=a(96453),f=a.n(w),b=a(88072),_=a.n(b),v=a(71420),x=a.n(v),W=a(8900),y=a.n(W),k=a(9911),O=a.n(k),T=a(27264),S=a.n(T),z=a(36685),C={};C.styleTagTransform=S(),C.setAttributes=y(),C.insert=x().bind(null,"head"),C.domAPI=_(),C.insertStyleElement=O(),f()(z.Z,C),z.Z&&z.Z.locals&&z.Z.locals;var U=(0,a(50131).default)(g,[["render",function(e,t,a,g,w,f){let b=(0,i.up)("Search"),_=(0,i.up)("el-icon"),v=(0,i.up)("el-input"),x=(0,i.up)("el-option"),W=(0,i.up)("el-select"),y=(0,i.up)("el-button"),k=(0,i.up)("el-table-column"),O=(0,i.up)("el-image"),T=(0,i.up)("el-tag"),S=(0,i.up)("el-table"),z=(0,i.up)("el-pagination"),C=(0,i.up)("el-card"),U=(0,i.up)("el-descriptions-item"),j=(0,i.up)("el-descriptions"),P=(0,i.up)("el-col"),V=(0,i.up)("el-row"),A=(0,i.up)("el-divider"),q=(0,i.up)("el-step"),D=(0,i.up)("el-steps"),L=(0,i.up)("el-dialog"),$=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(C,{shadow:"never"},{header:(0,i.w5)(()=>[(0,i._)("div",r,[t[8]||(t[8]=(0,i._)("span",null,"订单管理",-1)),(0,i._)("div",d,[(0,i.Wm)(v,{modelValue:w.searchText,"onUpdate:modelValue":t[0]||(t[0]=e=>w.searchText=e),placeholder:"搜索订单...",clearable:"",style:{width:"200px","margin-right":"10px"}},{prefix:(0,i.w5)(()=>[(0,i.Wm)(_,null,{default:(0,i.w5)(()=>[(0,i.Wm)(b)]),_:1})]),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:w.filterStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>w.filterStatus=e),placeholder:"状态筛选",style:{width:"120px","margin-right":"10px"}},{default:(0,i.w5)(()=>[(0,i.Wm)(x,{label:"全部",value:""}),(0,i.Wm)(x,{label:"待付款",value:"pending"}),(0,i.Wm)(x,{label:"待发货",value:"paid"}),(0,i.Wm)(x,{label:"已发货",value:"shipped"}),(0,i.Wm)(x,{label:"已完成",value:"completed"}),(0,i.Wm)(x,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),(0,i.Wm)(y,{type:"primary",onClick:f.exportOrders},{default:(0,i.w5)(()=>[...t[7]||(t[7]=[(0,i.Uk)("导出订单",-1)])]),_:1},8,["onClick"])])])]),default:(0,i.w5)(()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(S,{data:f.filteredOrders,style:{width:"100%"},"row-key":"id"},{default:(0,i.w5)(()=>[(0,i.Wm)(k,{prop:"id",label:"订单号",width:"180"}),(0,i.Wm)(k,{prop:"customer",label:"客户",width:"120"}),(0,i.Wm)(k,{prop:"products",label:"商品","min-width":"250"},{default:(0,i.w5)(({row:e})=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.products,e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"order-product"},[(0,i.Wm)(O,{src:e.image,fit:"cover",style:{width:"40px",height:"40px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,i._)("div",s,[(0,i._)("div",null,(0,i.zw)(e.name),1),(0,i._)("div",n,[(0,i._)("span",null,"\xa5"+(0,i.zw)(e.price)+" \xd7 "+(0,i.zw)(e.quantity),1)])])]))),128))]),_:1}),(0,i.Wm)(k,{prop:"totalAmount",label:"订单金额",width:"120"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)(" \xa5"+(0,i.zw)(e.totalAmount.toLocaleString()),1)]),_:1}),(0,i.Wm)(k,{label:"状态",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(T,{type:f.getStatusType(e.status)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(f.getStatusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,i.Wm)(k,{prop:"createTime",label:"下单时间",width:"180"}),(0,i.Wm)(k,{label:"操作",width:"200"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(y,{type:"text",onClick:t=>f.viewOrder(e)},{default:(0,i.w5)(()=>[...t[9]||(t[9]=[(0,i.Uk)("查看",-1)])]),_:2},1032,["onClick"]),"paid"===e.status?((0,i.wg)(),(0,i.j4)(y,{key:0,type:"text",onClick:t=>f.shipOrder(e)},{default:(0,i.w5)(()=>[...t[10]||(t[10]=[(0,i.Uk)(" 发货 ",-1)])]),_:2},1032,["onClick"])):(0,i.kq)("v-if",!0),"pending"===e.status?((0,i.wg)(),(0,i.j4)(y,{key:1,type:"text",onClick:t=>f.cancelOrder(e)},{default:(0,i.w5)(()=>[...t[11]||(t[11]=[(0,i.Uk)(" 取消 ",-1)])]),_:2},1032,["onClick"])):(0,i.kq)("v-if",!0)]),_:1})]),_:1},8,["data"])),[[$,w.loading]]),(0,i._)("div",o,[(0,i.Wm)(z,{"current-page":w.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>w.currentPage=e),"page-size":w.pageSize,"onUpdate:pageSize":t[3]||(t[3]=e=>w.pageSize=e),"page-sizes":[10,20,50,100],total:w.totalOrders,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,i.kq)(" 订单详情对话框 "),(0,i.Wm)(L,{modelValue:w.detailDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>w.detailDialogVisible=e),title:"订单详情",width:"800px"},{footer:(0,i.w5)(()=>[(0,i._)("span",h,[(0,i.Wm)(y,{onClick:t[4]||(t[4]=e=>w.detailDialogVisible=!1)},{default:(0,i.w5)(()=>[...t[15]||(t[15]=[(0,i.Uk)("关闭",-1)])]),_:1}),"paid"===w.detailOrder.status?((0,i.wg)(),(0,i.j4)(y,{key:0,type:"primary",onClick:t[5]||(t[5]=e=>f.shipOrder(w.detailOrder))},{default:(0,i.w5)(()=>[...t[16]||(t[16]=[(0,i.Uk)(" 立即发货 ",-1)])]),_:1})):(0,i.kq)("v-if",!0)])]),default:(0,i.w5)(()=>[(0,i.Wm)(V,{gutter:20},{default:(0,i.w5)(()=>[(0,i.Wm)(P,{span:16},{default:(0,i.w5)(()=>[(0,i.Wm)(j,{column:1,border:""},{default:(0,i.w5)(()=>[(0,i.Wm)(U,{label:"订单号"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.id),1)]),_:1}),(0,i.Wm)(U,{label:"客户"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.customer),1)]),_:1}),(0,i.Wm)(U,{label:"联系电话"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.phone),1)]),_:1}),(0,i.Wm)(U,{label:"收货地址"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.address),1)]),_:1}),(0,i.Wm)(U,{label:"订单状态"},{default:(0,i.w5)(()=>[(0,i.Wm)(T,{type:f.getStatusType(w.detailOrder.status)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(f.getStatusText(w.detailOrder.status)),1)]),_:1},8,["type"])]),_:1}),(0,i.Wm)(U,{label:"下单时间"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.createTime),1)]),_:1}),(0,i.Wm)(U,{label:"支付时间"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.payTime),1)]),_:1}),(0,i.Wm)(U,{label:"发货时间"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(w.detailOrder.shipTime),1)]),_:1})]),_:1})]),_:1}),(0,i.Wm)(P,{span:8},{default:(0,i.w5)(()=>[(0,i._)("div",c,[t[12]||(t[12]=(0,i._)("div",{class:"amount-label"},"订单总额",-1)),(0,i._)("div",p,"\xa5"+(0,i.zw)(w.detailOrder.totalAmount?.toLocaleString()),1)])]),_:1})]),_:1}),(0,i.Wm)(A,null,{default:(0,i.w5)(()=>[...t[13]||(t[13]=[(0,i.Uk)("商品信息",-1)])]),_:1}),(0,i.Wm)(S,{data:w.detailOrder.products,style:{width:"100%"}},{default:(0,i.w5)(()=>[(0,i.Wm)(k,{label:"商品","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",u,[(0,i.Wm)(O,{src:e.image,fit:"cover",style:{width:"60px",height:"60px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,i._)("div",null,[(0,i._)("div",null,(0,i.zw)(e.name),1),(0,i._)("div",m,(0,i.zw)(e.spec),1)])])]),_:1}),(0,i.Wm)(k,{prop:"price",label:"单价",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)(" \xa5"+(0,i.zw)(e.price),1)]),_:1}),(0,i.Wm)(k,{prop:"quantity",label:"数量",width:"80"}),(0,i.Wm)(k,{prop:"subtotal",label:"小计",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)(" \xa5"+(0,i.zw)(e.subtotal),1)]),_:1})]),_:1},8,["data"]),(0,i.Wm)(A,null,{default:(0,i.w5)(()=>[...t[14]||(t[14]=[(0,i.Uk)("物流信息",-1)])]),_:1}),(0,i.Wm)(D,{active:f.getLogisticsStep(w.detailOrder.status),"finish-status":"success",simple:""},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{title:"已下单",description:w.detailOrder.createTime},null,8,["description"]),(0,i.Wm)(q,{title:"已付款",description:w.detailOrder.payTime},null,8,["description"]),(0,i.Wm)(q,{title:"已发货",description:w.detailOrder.shipTime},null,8,["description"]),(0,i.Wm)(q,{title:"已完成"})]),_:1},8,["active"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-432bc3bb"]])}}]);