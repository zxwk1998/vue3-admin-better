"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["2763"],{72843:function(e,t,a){var i=a(91522),l=a.n(i),r=a(44011),d=a.n(r)()(l());d.push([e.id,".order-container[data-v-432bc3bb]{padding:20px}.order-container .card-header[data-v-432bc3bb]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.order-container .order-product[data-v-432bc3bb]{display:flex;align-items:center;margin-bottom:10px}.order-container .order-product[data-v-432bc3bb]:last-child{margin-bottom:0}.order-container .order-product .product-info .product-meta[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .order-amount[data-v-432bc3bb]{text-align:center;padding:20px;background-color:#f5f7fa;border-radius:4px}.order-container .order-amount .amount-label[data-v-432bc3bb]{font-size:14px;color:#666;margin-bottom:10px}.order-container .order-amount .amount-value[data-v-432bc3bb]{font-size:24px;font-weight:bold;color:#fa541c}.order-container .product-cell[data-v-432bc3bb]{display:flex;align-items:center}.order-container .product-cell .product-spec[data-v-432bc3bb]{font-size:12px;color:#999;margin-top:3px}.order-container .pagination-container[data-v-432bc3bb]{margin-top:20px;text-align:right}",""]),t.A=d},65862:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var i=a(17180);let l={class:"order-container"},r={class:"card-header"},d={class:"header-actions"},s={class:"product-info"},n={class:"product-meta"},o={class:"pagination-container"},c={class:"order-amount"},p={class:"amount-value"},u={class:"product-cell"},b={class:"product-spec"},g={class:"dialog-footer"};var m={name:"Order",components:{Search:a(26965).Search},data:()=>({searchText:"",filterStatus:"",currentPage:1,pageSize:10,totalOrders:0,loading:!1,detailDialogVisible:!1,orders:[{id:"SO202305001",customer:"张三",phone:"13800138001",address:"北京市朝阳区某某大厦101室",totalAmount:15998,status:"shipped",createTime:"2023-05-01 14:30:00",payTime:"2023-05-01 14:35:00",shipTime:"2023-05-02 09:15:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 深空黑",price:7999,quantity:2,subtotal:15998,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305002",customer:"李四",phone:"13800138002",address:"上海市浦东新区某某路1001号",totalAmount:7999,status:"paid",createTime:"2023-05-03 10:15:00",payTime:"2023-05-03 10:20:00",products:[{id:1,name:"iPhone 14 Pro",spec:"128GB 银色",price:7999,quantity:1,subtotal:7999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202305003",customer:"王五",phone:"13800138003",address:"广州市天河区某某广场201室",totalAmount:2999,status:"pending",createTime:"2023-05-05 16:45:00",products:[{id:5,name:"Apple Watch Series 8",spec:"45mm GPS版",price:2999,quantity:1,subtotal:2999,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304015",customer:"赵六",phone:"13800138004",address:"深圳市南山区科技园南路1001号",totalAmount:1899,status:"completed",createTime:"2023-04-15 10:15:00",payTime:"2023-04-15 10:20:00",shipTime:"2023-04-16 14:30:00",completeTime:"2023-04-20 16:45:00",products:[{id:3,name:"AirPods Pro",spec:"第二代",price:1899,quantity:1,subtotal:1899,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]},{id:"SO202304010",customer:"孙七",phone:"13800138005",address:"杭州市西湖区某某路501室",totalAmount:4399,status:"cancelled",createTime:"2023-04-10 09:30:00",cancelTime:"2023-04-10 10:15:00",products:[{id:4,name:"iPad Air",spec:"64GB 深空灰",price:4399,quantity:1,subtotal:4399,image:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}]}],detailOrder:{}}),computed:{filteredOrders(){let e=this.orders;this.searchText&&(e=e.filter(e=>e.id.toLowerCase().includes(this.searchText.toLowerCase())||e.customer.toLowerCase().includes(this.searchText.toLowerCase()))),this.filterStatus&&(e=e.filter(e=>e.status===this.filterStatus));let t=(this.currentPage-1)*this.pageSize,a=t+this.pageSize;return e.slice(t,a)}},methods:{handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},getStatusText:e=>({pending:"待付款",paid:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[e]||e,getStatusType:e=>({pending:"info",paid:"warning",shipped:"",completed:"success",cancelled:"danger"})[e]||"info",getLogisticsStep:e=>({pending:0,paid:1,shipped:2,completed:3,cancelled:0})[e]||0,viewOrder(e){this.detailOrder={...e},this.detailDialogVisible=!0},shipOrder(e){this.$confirm(`确定要为订单${e.id}发货吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="shipped",this.orders[t].shipTime=new Date().toLocaleString(),this.$message.success("订单已发货"),this.detailOrder.id===e.id&&(this.detailOrder.status="shipped",this.detailOrder.shipTime=this.orders[t].shipTime))}).catch(()=>{this.$message.info("已取消操作")})},cancelOrder(e){this.$confirm(`确定要取消订单${e.id}吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.orders.findIndex(t=>t.id===e.id);-1!==t&&(this.orders[t].status="cancelled",this.orders[t].cancelTime=new Date().toLocaleString(),this.$message.success("订单已取消"),this.detailOrder.id===e.id&&(this.detailOrder.status="cancelled",this.detailOrder.cancelTime=this.orders[t].cancelTime))}).catch(()=>{this.$message.info("已取消操作")})},exportOrders(){this.$message.success("订单导出成功")}}},h=a(7368),f=a.n(h),k=a(60473),v=a.n(k),_=a(62915),x=a.n(_),F=a(14808),y=a.n(F),O=a(85364),T=a.n(O),S=a(78577),w=a.n(S),C=a(72843),L={};L.styleTagTransform=w(),L.setAttributes=y(),L.insert=x().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=T(),f()(C.A,L),C.A&&C.A.locals&&C.A.locals;var W=(0,a(40248).default)(m,[["render",function(e,t,a,m,h,f){let k=(0,i.g2)("Search"),v=(0,i.g2)("el-icon"),_=(0,i.g2)("el-input"),x=(0,i.g2)("el-option"),F=(0,i.g2)("el-select"),y=(0,i.g2)("el-button"),O=(0,i.g2)("el-table-column"),T=(0,i.g2)("el-image"),S=(0,i.g2)("el-tag"),w=(0,i.g2)("el-table"),C=(0,i.g2)("el-pagination"),L=(0,i.g2)("el-card"),W=(0,i.g2)("el-descriptions-item"),z=(0,i.g2)("el-descriptions"),A=(0,i.g2)("el-col"),P=(0,i.g2)("el-row"),V=(0,i.g2)("el-divider"),j=(0,i.g2)("el-step"),$=(0,i.g2)("el-steps"),q=(0,i.g2)("el-dialog"),B=(0,i.gN)("loading");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(L,{shadow:"never"},{header:(0,i.k6)(()=>[(0,i.Lk)("div",r,[t[8]||(t[8]=(0,i.Lk)("span",null,"订单管理",-1)),(0,i.Lk)("div",d,[(0,i.bF)(_,{modelValue:h.searchText,"onUpdate:modelValue":t[0]||(t[0]=e=>h.searchText=e),placeholder:"搜索订单...",clearable:"",style:{width:"200px","margin-right":"10px"}},{prefix:(0,i.k6)(()=>[(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(k)]),_:1})]),_:1},8,["modelValue"]),(0,i.bF)(F,{modelValue:h.filterStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>h.filterStatus=e),placeholder:"状态筛选",style:{width:"120px","margin-right":"10px"}},{default:(0,i.k6)(()=>[(0,i.bF)(x,{label:"全部",value:""}),(0,i.bF)(x,{label:"待付款",value:"pending"}),(0,i.bF)(x,{label:"待发货",value:"paid"}),(0,i.bF)(x,{label:"已发货",value:"shipped"}),(0,i.bF)(x,{label:"已完成",value:"completed"}),(0,i.bF)(x,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),(0,i.bF)(y,{type:"primary",onClick:f.exportOrders},{default:(0,i.k6)(()=>[...t[7]||(t[7]=[(0,i.eW)("导出订单",-1)])]),_:1},8,["onClick"])])])]),default:(0,i.k6)(()=>[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(w,{data:f.filteredOrders,style:{width:"100%"},"row-key":"id"},{default:(0,i.k6)(()=>[(0,i.bF)(O,{prop:"id",label:"订单号",width:"180"}),(0,i.bF)(O,{prop:"customer",label:"客户",width:"120"}),(0,i.bF)(O,{prop:"products",label:"商品","min-width":"250"},{default:(0,i.k6)(({row:e})=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.products,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"order-product"},[(0,i.bF)(T,{src:e.image,fit:"cover",style:{width:"40px",height:"40px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,i.Lk)("div",s,[(0,i.Lk)("div",null,(0,i.v_)(e.name),1),(0,i.Lk)("div",n,[(0,i.Lk)("span",null,"\xa5"+(0,i.v_)(e.price)+" \xd7 "+(0,i.v_)(e.quantity),1)])])]))),128))]),_:1}),(0,i.bF)(O,{prop:"totalAmount",label:"订单金额",width:"120"},{default:(0,i.k6)(({row:e})=>[(0,i.eW)(" \xa5"+(0,i.v_)(e.totalAmount.toLocaleString()),1)]),_:1}),(0,i.bF)(O,{label:"状态",width:"100"},{default:(0,i.k6)(({row:e})=>[(0,i.bF)(S,{type:f.getStatusType(e.status)},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(f.getStatusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,i.bF)(O,{prop:"createTime",label:"下单时间",width:"180"}),(0,i.bF)(O,{label:"操作",width:"200"},{default:(0,i.k6)(({row:e})=>[(0,i.bF)(y,{type:"text",onClick:t=>f.viewOrder(e)},{default:(0,i.k6)(()=>[...t[9]||(t[9]=[(0,i.eW)("查看",-1)])]),_:1},8,["onClick"]),"paid"===e.status?((0,i.uX)(),(0,i.Wv)(y,{key:0,type:"text",onClick:t=>f.shipOrder(e)},{default:(0,i.k6)(()=>[...t[10]||(t[10]=[(0,i.eW)(" 发货 ",-1)])]),_:1},8,["onClick"])):(0,i.Q3)("v-if",!0),"pending"===e.status?((0,i.uX)(),(0,i.Wv)(y,{key:1,type:"text",onClick:t=>f.cancelOrder(e)},{default:(0,i.k6)(()=>[...t[11]||(t[11]=[(0,i.eW)(" 取消 ",-1)])]),_:1},8,["onClick"])):(0,i.Q3)("v-if",!0)]),_:1})]),_:1},8,["data"])),[[B,h.loading]]),(0,i.Lk)("div",o,[(0,i.bF)(C,{"current-page":h.currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>h.currentPage=e),"page-size":h.pageSize,"onUpdate:pageSize":t[3]||(t[3]=e=>h.pageSize=e),"page-sizes":[10,20,50,100],total:h.totalOrders,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,i.Q3)(" 订单详情对话框 "),(0,i.bF)(q,{modelValue:h.detailDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>h.detailDialogVisible=e),title:"订单详情",width:"800px"},{footer:(0,i.k6)(()=>[(0,i.Lk)("span",g,[(0,i.bF)(y,{onClick:t[4]||(t[4]=e=>h.detailDialogVisible=!1)},{default:(0,i.k6)(()=>[...t[15]||(t[15]=[(0,i.eW)("关闭",-1)])]),_:1}),"paid"===h.detailOrder.status?((0,i.uX)(),(0,i.Wv)(y,{key:0,type:"primary",onClick:t[5]||(t[5]=e=>f.shipOrder(h.detailOrder))},{default:(0,i.k6)(()=>[...t[16]||(t[16]=[(0,i.eW)(" 立即发货 ",-1)])]),_:1})):(0,i.Q3)("v-if",!0)])]),default:(0,i.k6)(()=>[(0,i.bF)(P,{gutter:20},{default:(0,i.k6)(()=>[(0,i.bF)(A,{span:16},{default:(0,i.k6)(()=>[(0,i.bF)(z,{column:1,border:""},{default:(0,i.k6)(()=>[(0,i.bF)(W,{label:"订单号"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.id),1)]),_:1}),(0,i.bF)(W,{label:"客户"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.customer),1)]),_:1}),(0,i.bF)(W,{label:"联系电话"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.phone),1)]),_:1}),(0,i.bF)(W,{label:"收货地址"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.address),1)]),_:1}),(0,i.bF)(W,{label:"订单状态"},{default:(0,i.k6)(()=>[(0,i.bF)(S,{type:f.getStatusType(h.detailOrder.status)},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(f.getStatusText(h.detailOrder.status)),1)]),_:1},8,["type"])]),_:1}),(0,i.bF)(W,{label:"下单时间"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.createTime),1)]),_:1}),(0,i.bF)(W,{label:"支付时间"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.payTime),1)]),_:1}),(0,i.bF)(W,{label:"发货时间"},{default:(0,i.k6)(()=>[(0,i.eW)((0,i.v_)(h.detailOrder.shipTime),1)]),_:1})]),_:1})]),_:1}),(0,i.bF)(A,{span:8},{default:(0,i.k6)(()=>[(0,i.Lk)("div",c,[t[12]||(t[12]=(0,i.Lk)("div",{class:"amount-label"},"订单总额",-1)),(0,i.Lk)("div",p,"\xa5"+(0,i.v_)(h.detailOrder.totalAmount?.toLocaleString()),1)])]),_:1})]),_:1}),(0,i.bF)(V,null,{default:(0,i.k6)(()=>[...t[13]||(t[13]=[(0,i.eW)("商品信息",-1)])]),_:1}),(0,i.bF)(w,{data:h.detailOrder.products,style:{width:"100%"}},{default:(0,i.k6)(()=>[(0,i.bF)(O,{label:"商品","min-width":"200"},{default:(0,i.k6)(({row:e})=>[(0,i.Lk)("div",u,[(0,i.bF)(T,{src:e.image,fit:"cover",style:{width:"60px",height:"60px","border-radius":"4px","margin-right":"10px"}},null,8,["src"]),(0,i.Lk)("div",null,[(0,i.Lk)("div",null,(0,i.v_)(e.name),1),(0,i.Lk)("div",b,(0,i.v_)(e.spec),1)])])]),_:1}),(0,i.bF)(O,{prop:"price",label:"单价",width:"100"},{default:(0,i.k6)(({row:e})=>[(0,i.eW)(" \xa5"+(0,i.v_)(e.price),1)]),_:1}),(0,i.bF)(O,{prop:"quantity",label:"数量",width:"80"}),(0,i.bF)(O,{prop:"subtotal",label:"小计",width:"100"},{default:(0,i.k6)(({row:e})=>[(0,i.eW)(" \xa5"+(0,i.v_)(e.subtotal),1)]),_:1})]),_:1},8,["data"]),(0,i.bF)(V,null,{default:(0,i.k6)(()=>[...t[14]||(t[14]=[(0,i.eW)("物流信息",-1)])]),_:1}),(0,i.bF)($,{active:f.getLogisticsStep(h.detailOrder.status),"finish-status":"success",simple:""},{default:(0,i.k6)(()=>[(0,i.bF)(j,{title:"已下单",description:h.detailOrder.createTime},null,8,["description"]),(0,i.bF)(j,{title:"已付款",description:h.detailOrder.payTime},null,8,["description"]),(0,i.bF)(j,{title:"已发货",description:h.detailOrder.shipTime},null,8,["description"]),(0,i.bF)(j,{title:"已完成"})]),_:1},8,["active"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-432bc3bb"]])}}]);