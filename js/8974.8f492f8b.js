"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["8974"],{41726:function(e,a,t){var i=t(74748),l=t.n(i),n=t(49490),s=t.n(n)()(l());s.push([e.id,".campaign-container[data-v-42171f8e]{padding:20px}.campaign-container .card-header[data-v-42171f8e]{display:flex;justify-content:space-between;align-items:center;font-weight:bold}.campaign-container .campaign-name[data-v-42171f8e]{display:flex;align-items:center}.campaign-container .campaign-icon-detail[data-v-42171f8e]{width:100px;height:100px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;margin:0 auto}.campaign-container .stat-card[data-v-42171f8e]{text-align:center}.campaign-container .stat-card .stat-title[data-v-42171f8e]{font-size:14px;color:#666;margin-bottom:10px}.campaign-container .stat-card .stat-value[data-v-42171f8e]{font-size:24px;font-weight:bold;color:#333}.campaign-container .pagination-container[data-v-42171f8e]{margin-top:20px;text-align:right}",""]),a.Z=s},10315:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var i=t(78650);let l={class:"campaign-container"},n={class:"card-header"},s={class:"header-actions"},d={class:"campaign-name"},m={style:{"margin-left":"10px"}},r={class:"campaign-name"},o={style:{"margin-left":"10px"}},p={class:"campaign-name"},g={style:{"margin-left":"10px"}},u={class:"pagination-container"},c={style:{float:"left"}},w={style:{float:"right",color:"#8492a6","font-size":"13px"}},h={class:"dialog-footer"},f={class:"stat-value"},C={class:"stat-value"},_={class:"stat-value"},y={class:"stat-value"},W={ref:"conversionChart",style:{height:"300px"}},b={ref:"salesChart",style:{height:"300px"}},v={class:"dialog-footer"};var k=t(57864),T=t(36617),x={name:"Campaign",components:{Search:k.Search,Discount:k.Discount,Coin:k.Coin,Present:k.Present,Lightning:k.Lightning},data:()=>({activeTab:"all",campaignActiveTab:"statistics",searchText:"",currentPage:1,pageSize:10,totalCampaigns:0,loading:!1,searchingProducts:!1,campaignDialogVisible:!1,detailDialogVisible:!1,editingCampaign:null,campaigns:[{id:1,name:"618年中大促",type:"discount",startTime:"2023-06-01 00:00",endTime:"2023-06-18 23:59",status:"active",targetUsers:["all"],discountRate:80,participants:1256,orders:342,sales:128500,conversionRate:27.3,budget:5e4,createTime:"2023-05-15 10:30:00"},{id:2,name:"新品首发优惠",type:"reduction",startTime:"2023-05-20 00:00",endTime:"2023-05-27 23:59",status:"ended",targetUsers:["new"],reductionCondition:"满200减30",participants:865,orders:210,sales:65420,conversionRate:24.3,budget:2e4,createTime:"2023-05-10 14:45:00"},{id:3,name:"会员专享秒杀",type:"seckill",startTime:"2023-05-25 10:00",endTime:"2023-05-25 12:00",status:"pending",targetUsers:["vip"],seckillPrice:1999,participants:0,orders:0,sales:0,conversionRate:0,budget:1e4,createTime:"2023-05-20 09:15:00"},{id:4,name:"开学季赠品活动",type:"gift",startTime:"2023-08-20 00:00",endTime:"2023-09-10 23:59",status:"draft",targetUsers:["all"],gift:"购买指定商品即赠精美书签一套",participants:0,orders:0,sales:0,conversionRate:0,budget:5e3,createTime:"2023-05-25 16:20:00"}],campaignForm:{name:"",type:"discount",timeRange:[],targetUsers:[],discountRate:90,reductionCondition:"",gift:"",seckillPrice:0,products:[],budget:0},detailCampaign:{},availableProducts:[{id:1,name:"iPhone 14 Pro",price:7999},{id:2,name:"MacBook Pro 14英寸",price:15999},{id:3,name:"AirPods Pro",price:1899},{id:4,name:"iPad Air",price:4399},{id:5,name:"Apple Watch Series 8",price:2999}],campaignRules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],timeRange:[{required:!0,message:"请选择活动时间",trigger:"change"}],targetUsers:[{required:!0,message:"请选择目标用户",trigger:"change"}],budget:[{required:!0,message:"请输入活动预算",trigger:"blur"}]},campaignParticipants:[{id:"U1001",name:"张三",phone:"138****8001",orderTime:"2023-06-01 10:30:00",orderAmount:7999},{id:"U1002",name:"李四",phone:"138****8002",orderTime:"2023-06-01 14:45:00",orderAmount:15998}],conversionChart:null,salesChart:null}),computed:{filteredCampaigns(){let e=this.campaigns;this.searchText&&(e=e.filter(e=>e.name.toLowerCase().includes(this.searchText.toLowerCase())));let a=(this.currentPage-1)*this.pageSize,t=a+this.pageSize;return e.slice(a,t)},activeCampaigns(){return this.campaigns.filter(e=>"active"===e.status)},endedCampaigns(){return this.campaigns.filter(e=>"ended"===e.status)}},mounted(){this.initCharts()},beforeUnmount(){this.conversionChart&&this.conversionChart.dispose(),this.salesChart&&this.salesChart.dispose()},methods:{handleTabChange(e){this.activeTab=e,this.currentPage=1},handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},getCampaignText:e=>({discount:"折扣活动",reduction:"满减活动",gift:"赠品活动",seckill:"秒杀活动"})[e]||e,getCampaignType:e=>({discount:"primary",reduction:"success",gift:"warning",seckill:"danger"})[e]||"info",getCampaignIcon:e=>({discount:"Discount",reduction:"Coin",gift:"Present",seckill:"Lightning"})[e]||"Discount",getCampaignColor:e=>({discount:"#409EFF",reduction:"#67C23A",gift:"#E6A23C",seckill:"#F56C6C"})[e]||"#909399",getStatusText:e=>({draft:"草稿",pending:"待启动",active:"进行中",ended:"已结束"})[e]||e,getStatusType:e=>({draft:"info",pending:"warning",active:"success",ended:""})[e]||"info",getTargetUsersText(e){let a={all:"所有用户",new:"新用户",old:"老用户",vip:"VIP用户"};return e&&0!==e.length?e.map(e=>a[e]||e).join("、"):"未设置"},getCampaignRule(e){switch(e.type){case"discount":return`全场${e.discountRate}折`;case"reduction":return e.reductionCondition;case"gift":return e.gift;case"seckill":return`秒杀价\xa5${e.seckillPrice}`;default:return"未设置"}},showAddCampaignDialog(){this.editingCampaign=null,this.campaignForm={name:"",type:"discount",timeRange:[],targetUsers:[],discountRate:90,reductionCondition:"",gift:"",seckillPrice:0,products:[],budget:0},this.campaignDialogVisible=!0,this.$nextTick(()=>{this.$refs.campaignFormRef.resetFields()})},editCampaign(e){this.editingCampaign=e,this.campaignForm={name:e.name,type:e.type,timeRange:[e.startTime,e.endTime],targetUsers:e.targetUsers,discountRate:e.discountRate||90,reductionCondition:e.reductionCondition||"",gift:e.gift||"",seckillPrice:e.seckillPrice||0,products:e.products||[],budget:e.budget},this.campaignDialogVisible=!0},viewCampaign(e){this.detailCampaign={...e},this.detailDialogVisible=!0,this.$nextTick(()=>{this.updateCharts()})},startCampaign(e){this.$confirm(`确定要启动活动"${e.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a=this.campaigns.findIndex(a=>a.id===e.id);-1!==a&&(this.campaigns[a].status="active",this.$message.success("活动已启动"),this.detailCampaign.id===e.id&&(this.detailCampaign.status="active"))}).catch(()=>{this.$message.info("已取消操作")})},stopCampaign(e){this.$confirm(`确定要停止活动"${e.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let a=this.campaigns.findIndex(a=>a.id===e.id);-1!==a&&(this.campaigns[a].status="ended",this.$message.success("活动已停止"),this.detailCampaign.id===e.id&&(this.detailCampaign.status="ended"))}).catch(()=>{this.$message.info("已取消操作")})},saveCampaign(){this.$refs.campaignFormRef.validate(e=>{if(e){if(this.editingCampaign){let e=this.campaigns.findIndex(e=>e.id===this.editingCampaign.id);-1!==e&&(this.campaigns[e]={...this.editingCampaign,...this.campaignForm,startTime:this.campaignForm.timeRange[0],endTime:this.campaignForm.timeRange[1],status:"draft"},this.$message.success("活动更新成功"))}else{let e={id:Date.now(),createTime:new Date().toLocaleString(),status:"draft",participants:0,orders:0,sales:0,conversionRate:0,...this.campaignForm,startTime:this.campaignForm.timeRange[0],endTime:this.campaignForm.timeRange[1]};this.campaigns.push(e),this.totalCampaigns=this.campaigns.length,this.$message.success("活动创建成功")}this.campaignDialogVisible=!1}})},searchProducts(e){""!==e?(this.searchingProducts=!0,setTimeout(()=>{this.searchingProducts=!1},200)):this.availableProducts=[]},initCharts(){this.conversionChart=T.S1(this.$refs.conversionChart),this.conversionChart.setOption(this.getConversionChartOption()),this.salesChart=T.S1(this.$refs.salesChart),this.salesChart.setOption(this.getSalesChartOption())},updateCharts(){this.conversionChart&&this.conversionChart.setOption(this.getConversionChartOption()),this.salesChart&&this.salesChart.setOption(this.getSalesChartOption())},getConversionChartOption:()=>({title:{text:"转化率趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["6.1","6.2","6.3","6.4","6.5","6.6","6.7"]},yAxis:{type:"value"},series:[{data:[20,25,28,30,27,32,27.3],type:"line",smooth:!0}]}),getSalesChartOption:()=>({title:{text:"销售额趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["6.1","6.2","6.3","6.4","6.5","6.6","6.7"]},yAxis:{type:"value"},series:[{data:[15e3,22e3,28e3,32e3,29e3,35e3,32e3],type:"line",smooth:!0}]})}},U=t(96453),V=t.n(U),z=t(88072),F=t.n(z),P=t(71420),R=t.n(P),D=t(8900),S=t.n(D),j=t(9911),A=t.n(j),$=t(27264),q=t.n($),L=t(41726),I={};I.styleTagTransform=q(),I.setAttributes=S(),I.insert=R().bind(null,"head"),I.domAPI=F(),I.insertStyleElement=A(),V()(L.Z,I),L.Z&&L.Z.locals&&L.Z.locals;var O=(0,t(50131).default)(x,[["render",function(e,a,t,k,T,x){let U=(0,i.up)("Search"),V=(0,i.up)("el-icon"),z=(0,i.up)("el-input"),F=(0,i.up)("el-button"),P=(0,i.up)("el-avatar"),R=(0,i.up)("el-table-column"),D=(0,i.up)("el-tag"),S=(0,i.up)("el-table"),j=(0,i.up)("el-tab-pane"),A=(0,i.up)("el-tabs"),$=(0,i.up)("el-pagination"),q=(0,i.up)("el-card"),L=(0,i.up)("el-form-item"),I=(0,i.up)("Discount"),O=(0,i.up)("el-option"),Y=(0,i.up)("Coin"),B=(0,i.up)("Present"),H=(0,i.up)("Lightning"),M=(0,i.up)("el-select"),Z=(0,i.up)("el-date-picker"),E=(0,i.up)("el-col"),K=(0,i.up)("el-input-number"),Q=(0,i.up)("el-row"),G=(0,i.up)("el-form"),J=(0,i.up)("el-dialog"),N=(0,i.up)("el-descriptions-item"),X=(0,i.up)("el-descriptions"),ee=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(q,{shadow:"never"},{header:(0,i.w5)(()=>[(0,i._)("div",n,[a[22]||(a[22]=(0,i._)("span",null,"营销活动",-1)),(0,i._)("div",s,[(0,i.Wm)(z,{modelValue:T.searchText,"onUpdate:modelValue":a[0]||(a[0]=e=>T.searchText=e),placeholder:"搜索活动...",clearable:"",style:{width:"200px","margin-right":"10px"}},{prefix:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[(0,i.Wm)(U)]),_:1})]),_:1},8,["modelValue"]),(0,i.Wm)(F,{type:"primary",onClick:x.showAddCampaignDialog},{default:(0,i.w5)(()=>[...a[21]||(a[21]=[(0,i.Uk)("创建活动",-1)])]),_:1},8,["onClick"])])])]),default:(0,i.w5)(()=>[(0,i.Wm)(A,{modelValue:T.activeTab,"onUpdate:modelValue":a[1]||(a[1]=e=>T.activeTab=e),onTabChange:x.handleTabChange},{default:(0,i.w5)(()=>[(0,i.Wm)(j,{label:"所有活动",name:"all"},{default:(0,i.w5)(()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(S,{data:x.filteredCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.w5)(()=>[(0,i.Wm)(R,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",d,[(0,i.Wm)(P,{size:32,style:(0,i.j5)({backgroundColor:x.getCampaignColor(e.type)})},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(x.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i._)("span",m,(0,i.zw)(e.name),1)])]),_:1}),(0,i.Wm)(R,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(D,{type:x.getCampaignType(e.type)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.Wm)(R,{label:"活动时间","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",null,(0,i.zw)(e.startTime)+" 至 "+(0,i.zw)(e.endTime),1)]),_:1}),(0,i.Wm)(R,{label:"状态",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(D,{type:x.getStatusType(e.status)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getStatusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,i.Wm)(R,{label:"参与人数",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.participants),1)]),_:1}),(0,i.Wm)(R,{label:"转化率",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.conversionRate)+"% ",1)]),_:1}),(0,i.Wm)(R,{label:"操作",width:"200"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(F,{type:"text",onClick:a=>x.viewCampaign(e)},{default:(0,i.w5)(()=>[...a[23]||(a[23]=[(0,i.Uk)("查看",-1)])]),_:2},1032,["onClick"]),(0,i.Wm)(F,{type:"text",onClick:a=>x.editCampaign(e)},{default:(0,i.w5)(()=>[...a[24]||(a[24]=[(0,i.Uk)("编辑",-1)])]),_:2},1032,["onClick"]),"draft"===e.status||"pending"===e.status?((0,i.wg)(),(0,i.j4)(F,{key:0,type:"text",onClick:a=>x.startCampaign(e)},{default:(0,i.w5)(()=>[...a[25]||(a[25]=[(0,i.Uk)(" 启动 ",-1)])]),_:2},1032,["onClick"])):(0,i.kq)("v-if",!0),"active"===e.status?((0,i.wg)(),(0,i.j4)(F,{key:1,type:"text",onClick:a=>x.stopCampaign(e)},{default:(0,i.w5)(()=>[...a[26]||(a[26]=[(0,i.Uk)(" 停止 ",-1)])]),_:2},1032,["onClick"])):(0,i.kq)("v-if",!0)]),_:1})]),_:1},8,["data"])),[[ee,T.loading]])]),_:1}),(0,i.Wm)(j,{label:"进行中",name:"active"},{default:(0,i.w5)(()=>[(0,i.Wm)(S,{data:x.activeCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.w5)(()=>[(0,i.Wm)(R,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",r,[(0,i.Wm)(P,{size:32,style:(0,i.j5)({backgroundColor:x.getCampaignColor(e.type)})},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(x.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i._)("span",o,(0,i.zw)(e.name),1)])]),_:1}),(0,i.Wm)(R,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(D,{type:x.getCampaignType(e.type)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.Wm)(R,{label:"活动时间","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",null,(0,i.zw)(e.startTime)+" 至 "+(0,i.zw)(e.endTime),1)]),_:1}),(0,i.Wm)(R,{label:"参与人数",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.participants),1)]),_:1}),(0,i.Wm)(R,{label:"转化率",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.conversionRate)+"% ",1)]),_:1}),(0,i.Wm)(R,{label:"操作",width:"150"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(F,{type:"text",onClick:a=>x.viewCampaign(e)},{default:(0,i.w5)(()=>[...a[27]||(a[27]=[(0,i.Uk)("查看",-1)])]),_:2},1032,["onClick"]),(0,i.Wm)(F,{type:"text",onClick:a=>x.stopCampaign(e)},{default:(0,i.w5)(()=>[...a[28]||(a[28]=[(0,i.Uk)("停止",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),(0,i.Wm)(j,{label:"已结束",name:"ended"},{default:(0,i.w5)(()=>[(0,i.Wm)(S,{data:x.endedCampaigns,style:{width:"100%"},"row-key":"id"},{default:(0,i.w5)(()=>[(0,i.Wm)(R,{prop:"name",label:"活动名称","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",p,[(0,i.Wm)(P,{size:32,style:(0,i.j5)({backgroundColor:x.getCampaignColor(e.type)})},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(x.getCampaignIcon(e.type))))]),_:2},1024)]),_:2},1032,["style"]),(0,i._)("span",g,(0,i.zw)(e.name),1)])]),_:1}),(0,i.Wm)(R,{prop:"type",label:"活动类型",width:"120"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(D,{type:x.getCampaignType(e.type)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getCampaignText(e.type)),1)]),_:2},1032,["type"])]),_:1}),(0,i.Wm)(R,{label:"活动时间","min-width":"200"},{default:(0,i.w5)(({row:e})=>[(0,i._)("div",null,(0,i.zw)(e.startTime)+" 至 "+(0,i.zw)(e.endTime),1)]),_:1}),(0,i.Wm)(R,{label:"参与人数",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.participants),1)]),_:1}),(0,i.Wm)(R,{label:"转化率",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)((0,i.zw)(e.conversionRate)+"% ",1)]),_:1}),(0,i.Wm)(R,{label:"操作",width:"100"},{default:(0,i.w5)(({row:e})=>[(0,i.Wm)(F,{type:"text",onClick:a=>x.viewCampaign(e)},{default:(0,i.w5)(()=>[...a[29]||(a[29]=[(0,i.Uk)("查看",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue","onTabChange"]),(0,i._)("div",u,[(0,i.Wm)($,{"current-page":T.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>T.currentPage=e),"page-size":T.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>T.pageSize=e),"page-sizes":[10,20,50,100],total:T.totalCampaigns,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,i.kq)(" 创建/编辑活动对话框 "),(0,i.Wm)(J,{modelValue:T.campaignDialogVisible,"onUpdate:modelValue":a[15]||(a[15]=e=>T.campaignDialogVisible=e),title:T.editingCampaign?"编辑活动":"创建活动",width:"800px"},{footer:(0,i.w5)(()=>[(0,i._)("span",h,[(0,i.Wm)(F,{onClick:a[14]||(a[14]=e=>T.campaignDialogVisible=!1)},{default:(0,i.w5)(()=>[...a[39]||(a[39]=[(0,i.Uk)("取消",-1)])]),_:1}),(0,i.Wm)(F,{type:"primary",onClick:x.saveCampaign},{default:(0,i.w5)(()=>[...a[40]||(a[40]=[(0,i.Uk)(" 保存 ",-1)])]),_:1},8,["onClick"])])]),default:(0,i.w5)(()=>[(0,i.Wm)(G,{ref:"campaignFormRef",model:T.campaignForm,rules:T.campaignRules,"label-width":"100px"},{default:(0,i.w5)(()=>[(0,i.Wm)(Q,{gutter:20},{default:(0,i.w5)(()=>[(0,i.Wm)(E,{span:12},{default:(0,i.w5)(()=>[(0,i.Wm)(L,{label:"活动名称",prop:"name"},{default:(0,i.w5)(()=>[(0,i.Wm)(z,{modelValue:T.campaignForm.name,"onUpdate:modelValue":a[4]||(a[4]=e=>T.campaignForm.name=e)},null,8,["modelValue"])]),_:1}),(0,i.Wm)(L,{label:"活动类型",prop:"type"},{default:(0,i.w5)(()=>[(0,i.Wm)(M,{modelValue:T.campaignForm.type,"onUpdate:modelValue":a[5]||(a[5]=e=>T.campaignForm.type=e),placeholder:"请选择活动类型",style:{width:"100%"}},{default:(0,i.w5)(()=>[(0,i.Wm)(O,{label:"折扣活动",value:"discount"},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[(0,i.Wm)(I)]),_:1}),a[30]||(a[30]=(0,i._)("span",{style:{"margin-left":"10px"}},"折扣活动",-1))]),_:1}),(0,i.Wm)(O,{label:"满减活动",value:"reduction"},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[(0,i.Wm)(Y)]),_:1}),a[31]||(a[31]=(0,i._)("span",{style:{"margin-left":"10px"}},"满减活动",-1))]),_:1}),(0,i.Wm)(O,{label:"赠品活动",value:"gift"},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[(0,i.Wm)(B)]),_:1}),a[32]||(a[32]=(0,i._)("span",{style:{"margin-left":"10px"}},"赠品活动",-1))]),_:1}),(0,i.Wm)(O,{label:"秒杀活动",value:"seckill"},{default:(0,i.w5)(()=>[(0,i.Wm)(V,null,{default:(0,i.w5)(()=>[(0,i.Wm)(H)]),_:1}),a[33]||(a[33]=(0,i._)("span",{style:{"margin-left":"10px"}},"秒杀活动",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,i.Wm)(L,{label:"活动时间",prop:"timeRange"},{default:(0,i.w5)(()=>[(0,i.Wm)(Z,{modelValue:T.campaignForm.timeRange,"onUpdate:modelValue":a[6]||(a[6]=e=>T.campaignForm.timeRange=e),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),(0,i.Wm)(L,{label:"目标用户",prop:"targetUsers"},{default:(0,i.w5)(()=>[(0,i.Wm)(M,{modelValue:T.campaignForm.targetUsers,"onUpdate:modelValue":a[7]||(a[7]=e=>T.campaignForm.targetUsers=e),multiple:"",placeholder:"请选择目标用户",style:{width:"100%"}},{default:(0,i.w5)(()=>[(0,i.Wm)(O,{label:"所有用户",value:"all"}),(0,i.Wm)(O,{label:"新用户",value:"new"}),(0,i.Wm)(O,{label:"老用户",value:"old"}),(0,i.Wm)(O,{label:"VIP用户",value:"vip"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,i.Wm)(E,{span:12},{default:(0,i.w5)(()=>["discount"===T.campaignForm.type?((0,i.wg)(),(0,i.j4)(L,{key:0,label:"折扣率",prop:"discountRate"},{default:(0,i.w5)(()=>[(0,i.Wm)(K,{modelValue:T.campaignForm.discountRate,"onUpdate:modelValue":a[8]||(a[8]=e=>T.campaignForm.discountRate=e),min:0,max:100,"controls-position":"right",style:{width:"100%"}},{append:(0,i.w5)(()=>[...a[34]||(a[34]=[(0,i.Uk)("%",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.kq)("v-if",!0),"reduction"===T.campaignForm.type?((0,i.wg)(),(0,i.j4)(L,{key:1,label:"满减条件",prop:"reductionCondition"},{default:(0,i.w5)(()=>[(0,i.Wm)(z,{modelValue:T.campaignForm.reductionCondition,"onUpdate:modelValue":a[9]||(a[9]=e=>T.campaignForm.reductionCondition=e),placeholder:"例如：满300减50"},{prepend:(0,i.w5)(()=>[...a[35]||(a[35]=[(0,i.Uk)("满",-1)])]),append:(0,i.w5)(()=>[...a[36]||(a[36]=[(0,i.Uk)("元减",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.kq)("v-if",!0),"gift"===T.campaignForm.type?((0,i.wg)(),(0,i.j4)(L,{key:2,label:"赠品",prop:"gift"},{default:(0,i.w5)(()=>[(0,i.Wm)(z,{modelValue:T.campaignForm.gift,"onUpdate:modelValue":a[10]||(a[10]=e=>T.campaignForm.gift=e),placeholder:"请输入赠品信息"},null,8,["modelValue"])]),_:1})):(0,i.kq)("v-if",!0),"seckill"===T.campaignForm.type?((0,i.wg)(),(0,i.j4)(L,{key:3,label:"秒杀价",prop:"seckillPrice"},{default:(0,i.w5)(()=>[(0,i.Wm)(K,{modelValue:T.campaignForm.seckillPrice,"onUpdate:modelValue":a[11]||(a[11]=e=>T.campaignForm.seckillPrice=e),min:0,"controls-position":"right",style:{width:"100%"}},{append:(0,i.w5)(()=>[...a[37]||(a[37]=[(0,i.Uk)("元",-1)])]),_:1},8,["modelValue"])]),_:1})):(0,i.kq)("v-if",!0),(0,i.Wm)(L,{label:"适用商品"},{default:(0,i.w5)(()=>[(0,i.Wm)(M,{modelValue:T.campaignForm.products,"onUpdate:modelValue":a[12]||(a[12]=e=>T.campaignForm.products=e),multiple:"",filterable:"",remote:"","remote-method":x.searchProducts,loading:T.searchingProducts,placeholder:"请选择适用商品",style:{width:"100%"}},{default:(0,i.w5)(()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.availableProducts,e=>((0,i.wg)(),(0,i.j4)(O,{key:e.id,label:e.name,value:e.id},{default:(0,i.w5)(()=>[(0,i._)("span",c,(0,i.zw)(e.name),1),(0,i._)("span",w," \xa5"+(0,i.zw)(e.price),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","remote-method","loading"])]),_:1}),(0,i.Wm)(L,{label:"活动预算",prop:"budget"},{default:(0,i.w5)(()=>[(0,i.Wm)(K,{modelValue:T.campaignForm.budget,"onUpdate:modelValue":a[13]||(a[13]=e=>T.campaignForm.budget=e),min:0,"controls-position":"right",style:{width:"100%"}},{append:(0,i.w5)(()=>[...a[38]||(a[38]=[(0,i.Uk)("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(0,i.kq)(" 活动详情对话框 "),(0,i.Wm)(J,{modelValue:T.detailDialogVisible,"onUpdate:modelValue":a[20]||(a[20]=e=>T.detailDialogVisible=e),title:"活动详情",width:"1000px"},{footer:(0,i.w5)(()=>[(0,i._)("span",v,[(0,i.Wm)(F,{onClick:a[17]||(a[17]=e=>T.detailDialogVisible=!1)},{default:(0,i.w5)(()=>[...a[45]||(a[45]=[(0,i.Uk)("关闭",-1)])]),_:1}),"draft"===T.detailCampaign.status||"pending"===T.detailCampaign.status?((0,i.wg)(),(0,i.j4)(F,{key:0,type:"primary",onClick:a[18]||(a[18]=e=>x.startCampaign(T.detailCampaign))},{default:(0,i.w5)(()=>[...a[46]||(a[46]=[(0,i.Uk)(" 启动活动 ",-1)])]),_:1})):(0,i.kq)("v-if",!0),"active"===T.detailCampaign.status?((0,i.wg)(),(0,i.j4)(F,{key:1,type:"danger",onClick:a[19]||(a[19]=e=>x.stopCampaign(T.detailCampaign))},{default:(0,i.w5)(()=>[...a[47]||(a[47]=[(0,i.Uk)(" 停止活动 ",-1)])]),_:1})):(0,i.kq)("v-if",!0)])]),default:(0,i.w5)(()=>[(0,i.Wm)(Q,{gutter:20},{default:(0,i.w5)(()=>[(0,i.Wm)(E,{span:16},{default:(0,i.w5)(()=>[(0,i.Wm)(X,{column:1,border:""},{default:(0,i.w5)(()=>[(0,i.Wm)(N,{label:"活动名称"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(T.detailCampaign.name),1)]),_:1}),(0,i.Wm)(N,{label:"活动类型"},{default:(0,i.w5)(()=>[(0,i.Wm)(D,{type:x.getCampaignType(T.detailCampaign.type)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getCampaignText(T.detailCampaign.type)),1)]),_:1},8,["type"])]),_:1}),(0,i.Wm)(N,{label:"活动时间"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(T.detailCampaign.startTime)+" 至 "+(0,i.zw)(T.detailCampaign.endTime),1)]),_:1}),(0,i.Wm)(N,{label:"状态"},{default:(0,i.w5)(()=>[(0,i.Wm)(D,{type:x.getStatusType(T.detailCampaign.status)},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getStatusText(T.detailCampaign.status)),1)]),_:1},8,["type"])]),_:1}),(0,i.Wm)(N,{label:"目标用户"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getTargetUsersText(T.detailCampaign.targetUsers)),1)]),_:1}),(0,i.Wm)(N,{label:"活动规则"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(x.getCampaignRule(T.detailCampaign)),1)]),_:1}),(0,i.Wm)(N,{label:"活动预算"},{default:(0,i.w5)(()=>[(0,i.Uk)("\xa5"+(0,i.zw)(T.detailCampaign.budget),1)]),_:1}),(0,i.Wm)(N,{label:"创建时间"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(T.detailCampaign.createTime),1)]),_:1})]),_:1})]),_:1}),(0,i.Wm)(E,{span:8},{default:(0,i.w5)(()=>[(0,i._)("div",{class:"campaign-icon-detail",style:(0,i.j5)({backgroundColor:x.getCampaignColor(T.detailCampaign.type)})},[(0,i.Wm)(V,{size:60},{default:(0,i.w5)(()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(x.getCampaignIcon(T.detailCampaign.type))))]),_:1})],4)]),_:1})]),_:1}),(0,i.Wm)(A,{modelValue:T.campaignActiveTab,"onUpdate:modelValue":a[16]||(a[16]=e=>T.campaignActiveTab=e),style:{"margin-top":"20px"}},{default:(0,i.w5)(()=>[(0,i.Wm)(j,{label:"数据统计",name:"statistics"},{default:(0,i.w5)(()=>[(0,i.Wm)(Q,{gutter:20,style:{"margin-bottom":"20px"}},{default:(0,i.w5)(()=>[(0,i.Wm)(E,{span:6},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{class:"stat-card",shadow:"never"},{default:(0,i.w5)(()=>[a[41]||(a[41]=(0,i._)("div",{class:"stat-title"},"参与人数",-1)),(0,i._)("div",f,(0,i.zw)(T.detailCampaign.participants),1)]),_:1})]),_:1}),(0,i.Wm)(E,{span:6},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{class:"stat-card",shadow:"never"},{default:(0,i.w5)(()=>[a[42]||(a[42]=(0,i._)("div",{class:"stat-title"},"订单数量",-1)),(0,i._)("div",C,(0,i.zw)(T.detailCampaign.orders),1)]),_:1})]),_:1}),(0,i.Wm)(E,{span:6},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{class:"stat-card",shadow:"never"},{default:(0,i.w5)(()=>[a[43]||(a[43]=(0,i._)("div",{class:"stat-title"},"销售额",-1)),(0,i._)("div",_,"\xa5"+(0,i.zw)(T.detailCampaign.sales),1)]),_:1})]),_:1}),(0,i.Wm)(E,{span:6},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{class:"stat-card",shadow:"never"},{default:(0,i.w5)(()=>[a[44]||(a[44]=(0,i._)("div",{class:"stat-title"},"转化率",-1)),(0,i._)("div",y,(0,i.zw)(T.detailCampaign.conversionRate)+"%",1)]),_:1})]),_:1})]),_:1}),(0,i.Wm)(Q,{gutter:20},{default:(0,i.w5)(()=>[(0,i.Wm)(E,{span:12},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{shadow:"never"},{default:(0,i.w5)(()=>[(0,i._)("div",W,null,512)]),_:1})]),_:1}),(0,i.Wm)(E,{span:12},{default:(0,i.w5)(()=>[(0,i.Wm)(q,{shadow:"never"},{default:(0,i.w5)(()=>[(0,i._)("div",b,null,512)]),_:1})]),_:1})]),_:1})]),_:1}),(0,i.Wm)(j,{label:"参与用户",name:"participants"},{default:(0,i.w5)(()=>[(0,i.Wm)(S,{data:T.campaignParticipants,style:{width:"100%"}},{default:(0,i.w5)(()=>[(0,i.Wm)(R,{prop:"id",label:"用户ID",width:"100"}),(0,i.Wm)(R,{prop:"name",label:"用户名",width:"150"}),(0,i.Wm)(R,{prop:"phone",label:"手机号",width:"150"}),(0,i.Wm)(R,{prop:"orderTime",label:"下单时间",width:"180"}),(0,i.Wm)(R,{prop:"orderAmount",label:"订单金额",width:"120"},{default:(0,i.w5)(({row:e})=>[(0,i.Uk)(" \xa5"+(0,i.zw)(e.orderAmount),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-42171f8e"]])}}]);