"use strict";(self.webpackChunkvue_admin_better=self.webpackChunkvue_admin_better||[]).push([["6686"],{23952:function(e,t,i){var a=i(74748),n=i.n(a),l=i(49490),o=i.n(l)()(n());o.push([e.id,".notification-container[data-v-371021fa]{padding:20px}.notification-container .card-header[data-v-371021fa]{font-weight:bold}.notification-container .notification-content[data-v-371021fa]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis}.notification-container .pagination-container[data-v-371021fa]{margin-top:20px;text-align:right}",""]),t.Z=o},38101:function(e,t,i){i.r(t),i.d(t,{default:function(){return V}});var a=i(78650);let n={class:"notification-container"},l={class:"card-header"},o={key:1},d={class:"notification-content"},r={class:"notification-content"},s={class:"notification-content"},c={class:"pagination-container"},u={class:"dialog-footer"};var f=i(96453),m=i.n(f),p=i(88072),g=i.n(p),h=i(71420),w=i.n(h),b=i(8900),_=i.n(b),k=i(9911),W=i.n(k),y=i(27264),C=i.n(y),v=i(23952),z={};z.styleTagTransform=C(),z.setAttributes=_(),z.insert=w().bind(null,"head"),z.domAPI=g(),z.insertStyleElement=W(),m()(v.Z,z),v.Z&&v.Z.locals&&v.Z.locals;var V=(0,i(50131).default)({name:"Notification",data:()=>({activeTab:"all",currentPage:1,pageSize:10,totalNotifications:0,loading:!1,sending:!1,dialogVisible:!1,notifications:[{id:1,title:"系统维护通知",content:"系统将于今晚00:00-02:00进行例行维护，请提前做好相关准备。",sender:"系统管理员",date:"2023-05-15 14:30",read:!1,priority:3},{id:2,title:"新功能上线",content:"我们新增了数据可视化功能，欢迎体验使用。",sender:"产品团队",date:"2023-05-14 09:15",read:!0,priority:1},{id:3,title:"安全更新提醒",content:"检测到您的密码强度较弱，请及时修改以确保账户安全。",sender:"安全团队",date:"2023-05-12 16:45",read:!1,priority:2},{id:4,title:"会议通知",content:"本周五下午3点将召开全体成员会议，请准时参加。",sender:"人事部",date:"2023-05-10 11:20",read:!0,priority:2},{id:5,title:"系统升级完成",content:"系统v2.0版本已升级完成，新增多项功能和优化。",sender:"技术部",date:"2023-05-08 18:00",read:!0,priority:1}],notificationForm:{title:"",content:"",recipients:[],priority:1},notificationRules:{title:[{required:!0,message:"请输入通知标题",trigger:"blur"}],content:[{required:!0,message:"请输入通知内容",trigger:"blur"}],recipients:[{required:!0,message:"请选择接收者",trigger:"change"}]},users:[{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"王五"},{id:4,name:"赵六"},{id:5,name:"钱七"}]}),computed:{filteredNotifications(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.notifications.slice(e,t)},unreadNotifications(){return this.notifications.filter(e=>!e.read)},readNotifications(){return this.notifications.filter(e=>e.read)}},methods:{handleTabChange(e){this.activeTab=e,this.currentPage=1},handleSizeChange(e){this.pageSize=e,this.currentPage=1},handleCurrentChange(e){this.currentPage=e},markAsRead(e){let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications[t].read=!0,this.$message.success("已标记为已读"))},deleteNotification(e){this.$confirm(`确定要删除通知"${e.title}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t=this.notifications.findIndex(t=>t.id===e.id);-1!==t&&(this.notifications.splice(t,1),this.totalNotifications=this.notifications.length,this.$message.success("删除成功"))}).catch(()=>{this.$message.info("已取消删除")})},showCreateDialog(){this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.notificationFormRef.resetFields()})},sendNotification(){this.$refs.notificationFormRef.validate(e=>{e&&(this.sending=!0,setTimeout(()=>{let e={id:this.notifications.length+1,...this.notificationForm,sender:"当前用户",date:new Date().toLocaleString(),read:!1};this.notifications.unshift(e),this.totalNotifications=this.notifications.length,this.dialogVisible=!1,this.sending=!1,this.$message.success("通知发送成功")},1e3))})},refreshNotifications(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.$message.success("刷新成功")},500)}}},[["render",function(e,t,i,f,m,p){let g=(0,a.up)("el-button"),h=(0,a.up)("el-badge"),w=(0,a.up)("el-table-column"),b=(0,a.up)("el-table"),_=(0,a.up)("el-tab-pane"),k=(0,a.up)("el-tabs"),W=(0,a.up)("el-pagination"),y=(0,a.up)("el-card"),C=(0,a.up)("el-input"),v=(0,a.up)("el-form-item"),z=(0,a.up)("el-option"),V=(0,a.up)("el-select"),U=(0,a.up)("el-radio"),N=(0,a.up)("el-radio-group"),x=(0,a.up)("el-form"),F=(0,a.up)("el-dialog"),T=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(y,{shadow:"never"},{header:(0,a.w5)(()=>[(0,a._)("div",l,[t[11]||(t[11]=(0,a._)("span",null,"通知中心",-1)),(0,a.Wm)(g,{type:"primary",onClick:p.showCreateDialog,style:{float:"right","margin-left":"10px"}},{default:(0,a.w5)(()=>[...t[9]||(t[9]=[(0,a.Uk)(" 发送通知 ",-1)])]),_:1},8,["onClick"]),(0,a.Wm)(g,{onClick:p.refreshNotifications,style:{float:"right"}},{default:(0,a.w5)(()=>[...t[10]||(t[10]=[(0,a.Uk)(" 刷新 ",-1)])]),_:1},8,["onClick"])])]),default:(0,a.w5)(()=>[(0,a.Wm)(k,{modelValue:m.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>m.activeTab=e),onTabChange:p.handleTabChange},{default:(0,a.w5)(()=>[(0,a.Wm)(_,{label:"全部通知",name:"all"},{default:(0,a.w5)(()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{data:p.filteredNotifications,style:{width:"100%"}},{default:(0,a.w5)(()=>[(0,a.Wm)(w,{prop:"title",label:"标题",width:"200"},{default:(0,a.w5)(({row:e})=>[e.read?((0,a.wg)(),(0,a.iD)("span",o,(0,a.zw)(e.title),1)):((0,a.wg)(),(0,a.j4)(h,{key:0,"is-dot":"",class:"item"},{default:(0,a.w5)(()=>[(0,a.Uk)((0,a.zw)(e.title),1)]),_:2},1024))]),_:1}),(0,a.Wm)(w,{prop:"content",label:"内容"},{default:(0,a.w5)(({row:e})=>[(0,a._)("div",d,(0,a.zw)(e.content),1)]),_:1}),(0,a.Wm)(w,{prop:"sender",label:"发送者",width:"120"}),(0,a.Wm)(w,{prop:"date",label:"时间",width:"180"}),(0,a.Wm)(w,{label:"操作",width:"200"},{default:(0,a.w5)(({row:e})=>[e.read?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.j4)(g,{key:0,type:"primary",size:"small",onClick:t=>p.markAsRead(e)},{default:(0,a.w5)(()=>[...t[12]||(t[12]=[(0,a.Uk)(" 标为已读 ",-1)])]),_:2},1032,["onClick"])),(0,a.Wm)(g,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.w5)(()=>[...t[13]||(t[13]=[(0,a.Uk)(" 删除 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,m.loading]])]),_:1}),(0,a.Wm)(_,{label:"未读通知",name:"unread"},{default:(0,a.w5)(()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{data:p.unreadNotifications,style:{width:"100%"}},{default:(0,a.w5)(()=>[(0,a.Wm)(w,{prop:"title",label:"标题",width:"200"},{default:(0,a.w5)(({row:e})=>[(0,a.Wm)(h,{"is-dot":"",class:"item"},{default:(0,a.w5)(()=>[(0,a.Uk)((0,a.zw)(e.title),1)]),_:2},1024)]),_:1}),(0,a.Wm)(w,{prop:"content",label:"内容"},{default:(0,a.w5)(({row:e})=>[(0,a._)("div",r,(0,a.zw)(e.content),1)]),_:1}),(0,a.Wm)(w,{prop:"sender",label:"发送者",width:"120"}),(0,a.Wm)(w,{prop:"date",label:"时间",width:"180"}),(0,a.Wm)(w,{label:"操作",width:"200"},{default:(0,a.w5)(({row:e})=>[(0,a.Wm)(g,{type:"primary",size:"small",onClick:t=>p.markAsRead(e)},{default:(0,a.w5)(()=>[...t[14]||(t[14]=[(0,a.Uk)(" 标为已读 ",-1)])]),_:2},1032,["onClick"]),(0,a.Wm)(g,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.w5)(()=>[...t[15]||(t[15]=[(0,a.Uk)(" 删除 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,m.loading]])]),_:1}),(0,a.Wm)(_,{label:"已读通知",name:"read"},{default:(0,a.w5)(()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{data:p.readNotifications,style:{width:"100%"}},{default:(0,a.w5)(()=>[(0,a.Wm)(w,{prop:"title",label:"标题",width:"200"}),(0,a.Wm)(w,{prop:"content",label:"内容"},{default:(0,a.w5)(({row:e})=>[(0,a._)("div",s,(0,a.zw)(e.content),1)]),_:1}),(0,a.Wm)(w,{prop:"sender",label:"发送者",width:"120"}),(0,a.Wm)(w,{prop:"date",label:"时间",width:"180"}),(0,a.Wm)(w,{label:"操作",width:"120"},{default:(0,a.w5)(({row:e})=>[(0,a.Wm)(g,{type:"danger",size:"small",onClick:t=>p.deleteNotification(e)},{default:(0,a.w5)(()=>[...t[16]||(t[16]=[(0,a.Uk)(" 删除 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,m.loading]])]),_:1})]),_:1},8,["modelValue","onTabChange"]),(0,a._)("div",c,[(0,a.Wm)(W,{"current-page":m.currentPage,"onUpdate:currentPage":t[1]||(t[1]=e=>m.currentPage=e),"page-size":m.pageSize,"onUpdate:pageSize":t[2]||(t[2]=e=>m.pageSize=e),"page-sizes":[10,20,50,100],total:m.totalNotifications,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,a.kq)(" 发送通知对话框 "),(0,a.Wm)(F,{modelValue:m.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>m.dialogVisible=e),title:"发送通知",width:"600px"},{footer:(0,a.w5)(()=>[(0,a._)("span",u,[(0,a.Wm)(g,{onClick:t[7]||(t[7]=e=>m.dialogVisible=!1)},{default:(0,a.w5)(()=>[...t[20]||(t[20]=[(0,a.Uk)("取消",-1)])]),_:1}),(0,a.Wm)(g,{type:"primary",onClick:p.sendNotification,loading:m.sending},{default:(0,a.w5)(()=>[...t[21]||(t[21]=[(0,a.Uk)(" 发送 ",-1)])]),_:1},8,["onClick","loading"])])]),default:(0,a.w5)(()=>[(0,a.Wm)(x,{ref:"notificationFormRef",model:m.notificationForm,rules:m.notificationRules,"label-width":"80px"},{default:(0,a.w5)(()=>[(0,a.Wm)(v,{label:"标题",prop:"title"},{default:(0,a.w5)(()=>[(0,a.Wm)(C,{modelValue:m.notificationForm.title,"onUpdate:modelValue":t[3]||(t[3]=e=>m.notificationForm.title=e)},null,8,["modelValue"])]),_:1}),(0,a.Wm)(v,{label:"内容",prop:"content"},{default:(0,a.w5)(()=>[(0,a.Wm)(C,{modelValue:m.notificationForm.content,"onUpdate:modelValue":t[4]||(t[4]=e=>m.notificationForm.content=e),type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),(0,a.Wm)(v,{label:"接收者",prop:"recipients"},{default:(0,a.w5)(()=>[(0,a.Wm)(V,{modelValue:m.notificationForm.recipients,"onUpdate:modelValue":t[5]||(t[5]=e=>m.notificationForm.recipients=e),multiple:"",placeholder:"请选择接收者",style:{width:"100%"}},{default:(0,a.w5)(()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.users,e=>((0,a.wg)(),(0,a.j4)(z,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.Wm)(v,{label:"紧急程度"},{default:(0,a.w5)(()=>[(0,a.Wm)(N,{modelValue:m.notificationForm.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>m.notificationForm.priority=e)},{default:(0,a.w5)(()=>[(0,a.Wm)(U,{label:1},{default:(0,a.w5)(()=>[...t[17]||(t[17]=[(0,a.Uk)("普通",-1)])]),_:1}),(0,a.Wm)(U,{label:2},{default:(0,a.w5)(()=>[...t[18]||(t[18]=[(0,a.Uk)("重要",-1)])]),_:1}),(0,a.Wm)(U,{label:3},{default:(0,a.w5)(()=>[...t[19]||(t[19]=[(0,a.Uk)("紧急",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}],["__scopeId","data-v-371021fa"]])}}]);